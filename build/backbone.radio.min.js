// Backbone.Radio v0.8.2

!function(a,b){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("backbone"),d=require("underscore");module.exports=b(c,d)}else b(a.Backbone,a._)}(this,function(a,b){"use strict";function c(a,b,c){if(k.DEBUG){var d=c?" on the "+c+" channel":"";console.warn(a+d+': "'+b+'"')}}function d(a,b,c,d){if(!c)return!1;var e=[];if("object"==typeof c){for(var f in c)e.push(a[b].apply(a,[f,c[f]].concat(d)));return e}if(l.test(c)){for(var g=c.split(l),h=0,i=g.length;i>h;h++)e.push(a[b].apply(a,[g[h]].concat(d)));return e}return!1}function e(a,b,c){var d=c.length;switch(d){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2]);default:for(var e=new Array(d),f=0;d>f;++f)e[f]=c[f];return a.apply(b,e)}}function f(a,b,c,d){var e=a[b];return c&&c!==e.callback&&c!==e.callback._callback||d&&d!==e.context?void 0:(delete a[b],!0)}function g(a,c,d,e){a||(a={});for(var g=c?[c]:b.keys(a),h=!1,i=0,j=g.length;j>i;i++)c=g[i],a[c]&&f(a,c,d,e)&&(h=!0);return h}function h(a){return m[a]||(m[a]=b.partial(k.log,a))}function i(a){return b.isFunction(a)?a:function(){return a}}var j=a.Radio,k=a.Radio={};k.VERSION="0.8.2",k.noConflict=function(){return a.Radio=j,this},k.DEBUG=!1;var l=/\s+/,m={};b.extend(k,{log:function(a,c){var d=b.rest(arguments,2);console.log("["+a+'] "'+c+'"',d)},tuneIn:function(a){var b=k.channel(a);return b._tunedIn=!0,b.on("all",h(a)),this},tuneOut:function(a){var b=k.channel(a);return b._tunedIn=!1,b.off("all",h(a)),delete m[a],this}}),k.Commands={command:function(a){var b,f=arguments.length;if(f>1){b=new Array(f-1);for(var g=1;f>g;++g)b[g-1]=b[g]}if(d(this,"command",a,b))return this;var h=this.channelName,i=this._commands;if(h&&this._tunedIn&&k.log.apply(this,[h,a].concat(b)),i&&(i[a]||i["default"])){var j=i[a]||i["default"];b=i[a]?b:[a].concat(b),e(j.callback,j.context,b)}else c("An unhandled command was fired",a,h);return this},comply:function(a,b,e){return d(this,"comply",a,[b,e])?this:(this._commands||(this._commands={}),this._commands[a]&&c("A command was overwritten",a,this.channelName),this._commands[a]={callback:b,context:e||this},this)},complyOnce:function(a,c,e){if(d(this,"complyOnce",a,[c,e]))return this;var f=this,g=b.once(function(){return f.stopComplying(a),c.apply(this,arguments)});return this.comply(a,g,e)},stopComplying:function(a,b,e){return d(this,"stopComplying",a)?this:(a||b||e?g(this._commands,a,b,e)||c("Attempted to remove the unregistered command",a,this.channelName):delete this._commands,this)}},k.Requests={_requests:{},request:function(a){var b,f=arguments.length;if(f>1){b=new Array(f-1);for(var g=1;f>g;++g)b[g-1]=b[g]}var h=d(this,"request",a,b);if(h)return h;var i=this.channelName,j=this._requests;if(i&&this._tunedIn&&k.log.apply(this,[i,a].concat(b)),j&&(j[a]||j["default"])){var l=j[a]||j["default"];return b=j[a]?b:[a].concat(b),e(l.callback,l.context,b)}c("An unhandled request was fired",a,i)},reply:function(a,b,e){if(d(this,"reply",a,[b,e]))return this;var f=this._requests;return f[a]&&c("A request was overwritten",a,this.channelName),f[a]={callback:i(b),context:e||this},this._requests=f,this},replyOnce:function(a,c,e){if(d(this,"replyOnce",a,[c,e]))return this;var f=this,g=b.once(function(){return f.stopReplying(a),i(c).apply(this,arguments)});return this.reply(a,g,e)},stopReplying:function(a,b,e){return d(this,"stopReplying",a)?this:(a||b||e?g(this._requests,a,b,e)||c("Attempted to remove the unregistered request",a,this.channelName):delete this._requests,this)}},k._channels={},k.channel=function(a){if(!a)throw new Error("You must provide a name for the channel.");return k._channels[a]?k._channels[a]:k._channels[a]=new k.Channel(a)},k.Channel=function(a){this.channelName=a},b.extend(k.Channel.prototype,a.Events,k.Commands,k.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopComplying(),this.stopReplying(),this}});var n=[a.Events,k.Commands,k.Requests];return b.each(n,function(a){b.each(a,function(a,b){k[b]=function(a){var c=arguments,d=c.length;if(!(2>d)){var e=this.channel(a);switch(d){case 2:return e[b](c[1]);case 3:return e[b](c[1],c[2]);case 4:return e[b](c[1],c[2],c[3]);default:for(var f=new Array(d-1),g=1;d>g;++g)f[g-1]=c[g];return e[b].apply(e,f)}}}})}),k});
//# sourceMappingURL=backbone.radio.min.map